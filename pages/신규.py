import streamlit as st
import pandas as pd
import time

df = pd.read_csv("data/고객db_전처리.csv")

# 신규 고객에 대한 서비스 혜택 제공
# 신규 고객 : 최근 6개월 이내 첫 구매 이력이 있는 고객
st.write("## 신규 고객 대상 프로모션 1 : 웰컴 패키지 제공")
st.subheader("서비스 혜택 세부 내용")

st.markdown("""
- **첫 서비스 혜택:**
  - 첫 정기점검, 세차 또는 소모품 교체 서비스에 대해 무료/할인 쿠폰 제공
- **브랜드 기념품:**
  - 차량용 방향제, 로고가 새겨진 키체인, 청소용품 등을 포함한 브랜드 기념품 제공
  - 브랜드 이미지 강화 및 브랜드에 대한 긍정적인 첫인상 형성
- **맞춤형 커뮤니케이션:**
  - 웰컴 패키지 안내 이메일/문자 메시지 발송 : 구체적인 사용 방법 및 유의사항 안내
  - 고객의 차량 종류나 구매 시기 등 데이터 활용해 맞춤형 혜택 제시
""")

st.write("## 2. 추천 프로그램 (Referral Program)")
st.markdown("""
- **양측 혜택 제공:**
  - 신규 고객이 추천인 코드를 사용해 서비스 예약 시, 추천인과 신규 고객 모두에게 정비 할인, 포인트 적립 또는 무료 서비스 쿠폰 등 보상을 제공합니다.
- **고유 추천 코드 시스템:**
  - 각 고객에게 고유한 추천 코드를 발급해, 이를 통해 추천 현황 및 혜택 지급이 자동화되도록 시스템을 구축합니다.
- **다양한 보상 옵션:**
  - 할인 혜택 외에도, 포인트 적립, 차량용 액세서리 또는 추가 서비스 업그레이드 등 다양한 보상 방식을 마련해 고객 선택의 폭을 넓힙니다.
- **홍보 및 참여 유도:**
  - 이메일, 모바일 앱, SNS 채널 등 다양한 마케팅 채널을 통해 추천 프로그램을 적극 홍보합니다.
  - 추천 성공 사례를 공유하거나, 추천 순위별 추가 보상을 제공하는 등 고객의 참여를 독려하는 이벤트를 병행할 수 있습니다.
- **실시간 모니터링:**
  - 고객 포털이나 앱 내에서 추천 진행 상황과 보상 내역을 실시간으로 확인할 수 있도록 하여, 투명한 프로세스를 구축합니다.
""")

st.write("## 3. 신규 고객 전용 이벤트")
st.markdown("""
- **교육 및 세미나 개최:**
  - 차량 관리, 정비 팁, 안전 운전 강의 등 주제로 온·오프라인 세미나나 워크숍을 정기적으로 개최합니다.
  - 전문가 초청 강연이나 실시간 Q&A 세션을 통해 고객이 직접 궁금한 점을 해소할 수 있도록 합니다.
- **커뮤니티 형성:**
  - 신규 고객들 간의 네트워킹 이벤트나 소규모 모임을 기획해, 경험 공유 및 브랜드에 대한 신뢰감을 형성합니다.
  - 이벤트 후 고객 후기를 SNS나 웹사이트에 공유하여, 다른 고객들의 참여를 유도합니다.
- **참여 인센티브:**
  - 이벤트 참가자에게는 할인 쿠폰, 포인트 적립 또는 다음 서비스 예약 시 사용할 수 있는 특별 혜택을 제공합니다.
  - 이벤트 참여 인증(예: SNS 포스팅) 시 추가 혜택을 제공해, 자연스러운 바이럴 마케팅 효과를 노릴 수 있습니다.
- **온/오프라인 통합 운영:**
  - 코로나 이후 변화된 환경에 맞춰, 온라인 라이브 세미나나 웨비나 형태로도 진행할 수 있도록 유연한 이벤트 운영 방안을 마련합니다.
  - 오프라인 이벤트와 연계된 온라인 콘텐츠(녹화 영상, 자료집 등)를 제공해, 참여하지 못한 고객도 혜택을 누릴 수 있게 합니다.
""")

new_client = df.loc[df["고객 등급"] == "신규", ["이름", "휴대폰 번호", "이메일"]]
new_client.reset_index(drop=True, inplace=True)

st.markdown("### 일반 고객 리스트")
st.dataframe(new_client)

st.markdown("### 할인 혜택 안내 예시 (이메일 및 문자)")
col1, col2 = st.columns(2)
with col1:
    st.image("images/email_sample.png", caption="할인 안내 이메일 예시")
with col2:
    st.image("images/sms_sample.png", caption="할인 안내 문자 예시")

if st.button("할인 혜택 발송 시작"):
    st.info("각 고객에게 할인 혜택 안내 메시지를 전송 중입니다. 잠시만 기다려주세요.")
    
    # 발송 시뮬레이션: 진행 상태 표시
    progress_bar = st.progress(0)
    for percent in range(1, 101):
        time.sleep(0.01)  # 실제 전송 과정에서는 API 호출 등이 이루어질 수 있음
        progress_bar.progress(percent)
    
    st.success("모든 고객에게 할인 혜택 안내 메시지를 성공적으로 전송하였습니다.")

st.markdown("---")